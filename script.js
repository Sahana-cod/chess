var table = document.createElement("table");

var tr = document.createElement("tr");
tr.setAttribute('id','1');
tr.setAttribute('class','row');
var td = document.createElement("td");
td.innerHTML = "8";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,1');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,2');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,3');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,4');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,5');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,6');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,7');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','1,8');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
tr.setAttribute('id','2');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "7";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,1');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,2');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,3');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,4');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,5');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,6');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,7');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','2,8');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
tr.setAttribute('id','3');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "6";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,1');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,2');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,3');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,4');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,5');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,6');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,7');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','3,8');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
tr.setAttribute('id','4');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "5";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,1');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,2');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,3');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,4');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,5');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,6');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,7');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','4,8');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

var tr = document.createElement("tr");
tr.setAttribute('id','5');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "4";
tr.appendChild(td);
var td = document.createElement("td");
td.setAttribute('id','5,1');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,2');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,3');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,4');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,5');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,6');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,7');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','5,8');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
tr.setAttribute('id','6');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "3";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,1');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,2');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,3');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,4');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,5');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,6');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,7');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','6,8');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

var tr = document.createElement("tr");
tr.setAttribute('id','7');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "2";
tr.appendChild(td);
var td = document.createElement("td");
td.setAttribute('id','7,1');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,2');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,3');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,4');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,5');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,6');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,7');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','7,8');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
tr.setAttribute('id','8');
tr.setAttribute('class','row');
td = document.createElement("td");
td.innerHTML = "1";
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,1');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,2');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,3');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,4');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,5');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,6');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,7');
td.setAttribute('class','cell grey');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
td = document.createElement("td");
td.setAttribute('id','8,8');
td.setAttribute('class','cell white');
td.setAttribute('onClick','clickedPiece(this.id)');
tr.appendChild(td);
table.appendChild(tr);

tr = document.createElement("tr");
td = document.createElement("td");
td.innerHTML = "";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "A";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "B";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "C";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "D";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "E";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "F";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "G";
tr.appendChild(td);
td = document.createElement("td");
td.innerHTML = "H";
tr.appendChild(td);
table.appendChild(tr);


var div1 = document.createElement("div");
div1.setAttribute('class','result');
var innerDiv = document.createElement("div");
innerDiv.setAttribute('id','data');
innerDiv.innerHTML = 'Click Start';
div1.appendChild(innerDiv);

var modeDiv = document.createElement("div");
modeDiv.setAttribute('class','playermode');
modeDiv.innerHTML = 'Player mode :';

var singleBtn = document.createElement("button");
singleBtn.setAttribute('onClick','singlemode()');
singleBtn.innerHTML = "Single";
modeDiv.appendChild(singleBtn);

var dualBtn = document.createElement("button");
dualBtn.setAttribute('onClick','dualmode()');
dualBtn.innerHTML = "Dual";
modeDiv.appendChild(dualBtn);

var startBtn = document.createElement("button");
startBtn.setAttribute('onClick','start()');
startBtn.setAttribute('style','margin-left:30%');
startBtn.innerHTML = "Start";
modeDiv.appendChild(startBtn);

var restartBtn = document.createElement("button");
restartBtn.setAttribute('onClick','start()');
startBtn.setAttribute('style','margin-left:30%');
restartBtn.innerHTML = "Reset";
modeDiv.appendChild(restartBtn);

document.body.appendChild(table);
document.body.appendChild(div1);
document.body.appendChild(modeDiv);

var data = 'w';
var selectedpiece = '';
var highlighted = [];var wtarget_id = '';
var target_id = '';
var pieces = {
      w_king: {
        idVal: '8,5',
        txt: '&#9812;',
        captured: false,
        moved: false,
        type: 'w_king'
        
      },
      w_queen: {
        idVal: '8,4',
        txt: '&#9813;',
        captured: false,
        moved: false,
        type: 'w_queen'
      },
      w_bishop1: {
        idVal: '8,3',
        txt: '&#9815;',
        captured: false,
        moved: false,
        type: 'w_bishop'
      },
      w_bishop2: {
        idVal: '8,6',
        txt: '&#9815;',
        captured: false,
        moved: false,
        type: 'w_bishop'
      },
      w_knight1: {
        idVal: '8,2',
        txt: '&#9816;',
        captured: false,
        moved: false,
        type: 'w_knight'
      },
      w_knight2: {
        idVal: '8,7',
        txt: '&#9816;',
        captured: false,
        moved: false,
        type: 'w_knight'
      },
      w_rook1: {
        idVal: '8,1',
        txt: '&#9814;',
        captured: false,
        moved: false,
        type: 'w_rook'
      },
      w_rook2: {
        idVal: '8,8',
        txt: '&#9814;',
        captured: false,
        moved: false,
        type: 'w_rook'
      },
      w_pawn1: {
        idVal: '7,1',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn2: {
        idVal: '7,2',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn3: {
        idVal: '7,3',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn4: {
        idVal: '7,4',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn5: {
        idVal: '7,5',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn6: {
        idVal: '7,6',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn7: {
        idVal: '7,7',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn8: {
        idVal: '7,8',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },

      b_king: {
        idVal: '1,5',
        txt: '&#9818;',
        captured: false,
        moved: false,
        type: 'b_king'
      },
      b_queen: {
        idVal: '1,4',
        txt: '&#9819;',
        captured: false,
        moved: false,
        type: 'b_queen'
      },
      b_bishop1: {
        idVal: '1,3',
        txt: '&#9821;',
        captured: false,
        moved: false,
        type: 'b_bishop'
      },
      b_bishop2: {
        idVal: '1,6',
        txt: '&#9821;',
        captured: false,
        moved: false,
        type: 'b_bishop'
      },
      b_knight1: {
        idVal: '1,2',
        txt: '&#9822;',
        captured: false,
        moved: false,
        type: 'b_knight'
      },
      b_knight2: {
        idVal: '1,7',
        txt: '&#9822;',
        captured: false,
        moved: false,
        type: 'b_knight'
      },
      b_rook1: {
        idVal: '1,1',
        txt: '&#9820;',
        captured: false,
        moved: false,
        type: 'b_rook'
      },
      b_rook2: {
        idVal: '1,8',
        txt: '&#9820;',
        captured: false,
        moved: false,
        type: 'b_rook'
      },
      b_pawn1: {
        idVal: '2,1',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn2: {
        idVal: '2,2',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn3: {
        idVal: '2,3',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn4: {
        idVal: '2,4',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn5: {
        idVal: '2,5',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn6: {
        idVal: '2,6',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn7: {
        idVal: '2,7',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn8: {
        idVal: '2,8',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      }

    };
	
function originalpieces(){
    return  {w_king: {
        idVal: '8,5',
        txt: '&#9812;',
        captured: false,
        moved: false,
        type: 'w_king'
        
      },
      w_queen: {
        idVal: '8,4',
        txt: '&#9813;',
        captured: false,
        moved: false,
        type: 'w_queen'
      },
      w_bishop1: {
        idVal: '8,3',
        txt: '&#9815;',
        captured: false,
        moved: false,
        type: 'w_bishop'
      },
      w_bishop2: {
        idVal: '8,6',
        txt: '&#9815;',
        captured: false,
        moved: false,
        type: 'w_bishop'
      },
      w_knight1: {
        idVal: '8,2',
        txt: '&#9816;',
        captured: false,
        moved: false,
        type: 'w_knight'
      },
      w_knight2: {
        idVal: '8,7',
        txt: '&#9816;',
        captured: false,
        moved: false,
        type: 'w_knight'
      },
      w_rook1: {
        idVal: '8,1',
        txt: '&#9814;',
        captured: false,
        moved: false,
        type: 'w_rook'
      },
      w_rook2: {
        idVal: '8,8',
        txt: '&#9814;',
        captured: false,
        moved: false,
        type: 'w_rook'
      },
      w_pawn1: {
        idVal: '7,1',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn2: {
        idVal: '7,2',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn3: {
        idVal: '7,3',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn4: {
        idVal: '7,4',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn5: {
        idVal: '7,5',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn6: {
        idVal: '7,6',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn7: {
        idVal: '7,7',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },
      w_pawn8: {
        idVal: '7,8',
        txt: '&#9817;',
        captured: false,
        type: 'w_pawn',
        moved: false
      },

      b_king: {
        idVal: '1,5',
        txt: '&#9818;',
        captured: false,
        moved: false,
        type: 'b_king'
      },
      b_queen: {
        idVal: '1,4',
        txt: '&#9819;',
        captured: false,
        moved: false,
        type: 'b_queen'
      },
      b_bishop1: {
        idVal: '1,3',
        txt: '&#9821;',
        captured: false,
        moved: false,
        type: 'b_bishop'
      },
      b_bishop2: {
        idVal: '1,6',
        txt: '&#9821;',
        captured: false,
        moved: false,
        type: 'b_bishop'
      },
      b_knight1: {
        idVal: '1,2',
        txt: '&#9822;',
        captured: false,
        moved: false,
        type: 'b_knight'
      },
      b_knight2: {
        idVal: '1,7',
        txt: '&#9822;',
        captured: false,
        moved: false,
        type: 'b_knight'
      },
      b_rook1: {
        idVal: '1,1',
        txt: '&#9820;',
        captured: false,
        moved: false,
        type: 'b_rook'
      },
      b_rook2: {
        idVal: '1,8',
        txt: '&#9820;',
        captured: false,
        moved: false,
        type: 'b_rook'
      },
      b_pawn1: {
        idVal: '2,1',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn2: {
        idVal: '2,2',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn3: {
        idVal: '2,3',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn4: {
        idVal: '2,4',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn5: {
        idVal: '2,5',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn6: {
        idVal: '2,6',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn7: {
        idVal: '2,7',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      },
      b_pawn8: {
        idVal: '2,8',
        txt: '&#9823;',
        captured: false,
        type: 'b_pawn',
        moved: false
      }

    };
}
var mode = '';
function singlemode(){
	mode = 'single';
	var x = document.getElementsByClassName('cell');
	  for(var i = 0; i<x.length; i++){
		x[i].innerHTML = '';
	    x[i].setAttribute('chess', 'null');
		x[i].classList.remove('highlight');
	  }
	document.getElementById('data').innerHTML ="Click Start";
}

function dualmode(){
	mode = 'dual';
	var x = document.getElementsByClassName('cell');
	  for(var i = 0; i<x.length; i++){
		x[i].innerHTML = '';
	    x[i].setAttribute('chess', 'null');
		x[i].classList.remove('highlight');
	  }
	document.getElementById('data').innerHTML ="Click Start";
}
	
function start() {
	if(mode == ''){
		alert('Select player mode');
	}else{
	  document.getElementById('data').innerHTML ="White Turn";
	  data = 'w';
      selectedpiece = '';
      highlighted = [];
      target_id = '';
      var x = document.getElementsByClassName('cell');
	  for(var i = 0; i<x.length; i++){
		x[i].innerHTML = '';
	    x[i].setAttribute('chess', 'null');
		x[i].classList.remove('highlight');
	  }
	  let originalpiece = originalpieces();
      for (let piece in originalpiece) {
        document.getElementById(originalpiece[piece].idVal).innerHTML = originalpiece[piece].txt;
        document.getElementById(originalpiece[piece].idVal).setAttribute('chess', piece);
		let resetIdVal = originalpiece[piece].idVal;
		for (let resetpiece in pieces) {
			if(pieces[resetpiece].txt == originalpiece[piece].txt){
				pieces[resetpiece].moved = false;
				pieces[resetpiece].captured = false;
				pieces[resetpiece].idVal = resetIdVal;
			}
		}
      }
	}
}

function optionsAvail(startpoint, coordinates, piecetype) { 
        
      coordinates = coordinates.filter(val => {
        let pos = { x: 0, y: 0 };
        pos.x = parseInt(val.split(',')[0]);
        pos.y = parseInt(val.split(',')[1]);

        if (!(pos.x < 1) && !(pos.x > 8) && !(pos.y < 1) && !(pos.y > 8)) { 
          return val;
        }
      });

      switch (piecetype) {

        case 'w_king':

          coordinates = coordinates.filter(val => {
            return (document.getElementById(val).getAttribute('chess') == 'null' || (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'b');
          });

          break;
        case 'b_king':
        
          coordinates = coordinates.filter(val => {
            return (document.getElementById(val).getAttribute('chess') == 'null' || (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'w');
          });

          break;
        case 'w_knight':

          coordinates = coordinates.filter(val => {
            return (document.getElementById(val).getAttribute('chess') == 'null' || (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'b');
          });

          break;

        case 'b_knight':

          coordinates = coordinates.filter(val => {
            return (document.getElementById(val).getAttribute('chess') == 'null' || (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'w');
          });

          break;

        case 'w_pawn':

            coordinates = coordinates.filter(val => {
              let sp = { x: 0, y: 0 };
              let coordinate = val.split(',');

              sp.x = startpoint.split(',')[0];
              sp.y = startpoint.split(',')[1];
              
              if ((coordinate[0] < sp.x || coordinate[0] > sp.x)){ 
                return (document.getElementById(val).getAttribute('chess') != 'null' && (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'b');
              } else { 
                if (coordinate[1] == (parseInt(sp.y) + 2) && document.getElementById(sp.x + ',' + (parseInt(sp.y) + 1)).getAttribute('chess') != 'null'){
				} else {
                  return (document.getElementById(val).getAttribute('chess') == 'null');
                }
              }
                          
            });
         
          break;

        case 'b_pawn':

          coordinates = coordinates.filter(val => {
            let sp = { x: 0, y: 0 };
            let coordinate = val.split(',');

            sp.x = startpoint.split(',')[0];
            sp.y = startpoint.split(',')[1];
            
            if (coordinate[0] < sp.x || coordinate[0] > sp.x){ 
              return (document.getElementById(val).getAttribute('chess') != 'null' && (document.getElementById(val).getAttribute('chess')).slice(0,1) == 'w'); 
            } else { 
              if (coordinate[1] == (parseInt(sp.y) - 2) && document.getElementById(sp.x + ',' + (parseInt(sp.y) - 1)).getAttribute('chess') != 'null'){
              } else {
                return (document.getElementById(val).getAttribute('chess') == 'null'); 
              }
            }
          });

          break;
      }      
      return coordinates;
    }


function moveoptions(selectedpiece) {

      let idVal = { x: '', y: '' };
      idVal.x = pieces[selectedpiece].idVal.split(',')[0];
      idVal.y = pieces[selectedpiece].idVal.split(',')[1];

      var options = []; 
      var coordinates = [];
      var startpoint = pieces[selectedpiece].idVal;
      var c1,c2,c3,c4,c5,c6,c7,c8;

      if (highlighted.length != 0) {
        togglehighlight(highlighted);
      }


      switch (pieces[selectedpiece].type) {
        case 'w_king':

          if (document.getElementById('8,6').getAttribute('chess') == 'null' && document.getElementById('8,7').getAttribute('chess') == 'null' && pieces['w_king'].moved == false && pieces['w_rook2'].moved == false) {
            coordinates = [{ x: 1, y: 1 },{ x: 1, y: 0 },{ x: 1, y: -1 },{ x: 0, y: -1 },{ x: -1, y: -1 },{ x: -1, y: 0 },{ x: -1, y: 1 },{ x: 0, y: 1 },{x: 0, y: 2}].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
            });
          } else {
            coordinates = [{ x: 1, y: 1 },{ x: 1, y: 0 },{ x: 1, y: -1 },{ x: 0, y: -1 },{ x: -1, y: -1 },{ x: -1, y: 0 },{ x: -1, y: 1 },{ x: 0, y: 1 }].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
            });
          }

          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);

          break;
        case 'b_king':

        if (document.getElementById('1,6').getAttribute('chess') == 'null' && document.getElementById('1,7').getAttribute('chess') == 'null' && pieces['b_king'].moved == false && pieces['b_rook2'].moved == false) {
          coordinates = [{ x: 1, y: 1 },{ x: 1, y: 0 },{ x: 1, y: -1 },{ x: 0, y: -1 },{ x: -1, y: -1 },{ x: -1, y: 0 },{ x: -1, y: 1 },{ x: 0, y: 1 },{x: 0, y: 2}].map(function(val){
            return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
          });
        } else {
          coordinates = [{ x: 1, y: 1 },{ x: 1, y: 0 },{ x: 1, y: -1 },{ x: 0, y: -1 },{ x: -1, y: -1 },{ x: -1, y: 0 },{ x: -1, y: 1 },{ x: 0, y: 1 }].map(function(val){
            return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
          });
        }
          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
		  if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				 let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}
			 }				 
		  }else{
			  togglehighlight(options);
		  }          

          break;
        case 'w_queen':

          c1 = w_options(idVal,[{x: 1, y: 1},{x: 2, y: 2},{x: 3, y: 3},{x: 4, y: 4},{x: 5, y: 5},{x: 6, y: 6},{x: 7, y: 7}]);
          c2 = w_options(idVal,[{x: 1, y: -1},{x: 2, y: -2},{x: 3, y: -3},{x: 4, y: -4},{x: 5, y: -5},{x: 6, y: -6},{x: 7, y: -7}]);
          c3 = w_options(idVal,[{x: -1, y: 1},{x: -2, y: 2},{x: -3, y: 3},{x: -4, y: 4},{x: -5, y: 5},{x: -6, y: 6},{x: -7, y: 7}]);
          c4 = w_options(idVal,[{x: -1, y: -1},{x: -2, y: -2},{x: -3, y: -3},{x: -4, y: -4},{x: -5, y: -5},{x: -6, y: -6},{x: -7, y: -7}]);
          c5 = w_options(idVal,[{x: 1, y: 0},{x: 2, y: 0},{x: 3, y: 0},{x: 4, y: 0},{x: 5, y: 0},{x: 6, y: 0},{x: 7, y: 0}]);
          c6 = w_options(idVal,[{x: 0, y: 1},{x: 0, y: 2},{x: 0, y: 3},{x: 0, y: 4},{x: 0, y: 5},{x: 0, y: 6},{x: 0, y: 7}]);
          c7 = w_options(idVal,[{x: -1, y: 0},{x: -2, y: 0},{x: -3, y: 0},{x: -4, y: 0},{x: -5, y: 0},{x: -6, y: 0},{x: -7, y: 0}]);
          c8 = w_options(idVal,[{x: 0, y: -1},{x: 0, y: -2},{x: 0, y: -3},{x: 0, y: -4},{x: 0, y: -5},{x: 0, y: -6},{x: 0, y: -7}]);

          coordinates = c1.concat(c2).concat(c3).concat(c4).concat(c5).concat(c6).concat(c7).concat(c8);
          
          options = coordinates.slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);

          break;
        case 'b_queen':
          
            c1 = b_options(idVal,[{x: 1, y: 1},{x: 2, y: 2},{x: 3, y: 3},{x: 4, y: 4},{x: 5, y: 5},{x: 6, y: 6},{x: 7, y: 7}]);
            c2 = b_options(idVal,[{x: 1, y: -1},{x: 2, y: -2},{x: 3, y: -3},{x: 4, y: -4},{x: 5, y: -5},{x: 6, y: -6},{x: 7, y: -7}]);
            c3 = b_options(idVal,[{x: -1, y: 1},{x: -2, y: 2},{x: -3, y: 3},{x: -4, y: 4},{x: -5, y: 5},{x: -6, y: 6},{x: -7, y: 7}]);
            c4 = b_options(idVal,[{x: -1, y: -1},{x: -2, y: -2},{x: -3, y: -3},{x: -4, y: -4},{x: -5, y: -5},{x: -6, y: -6},{x: -7, y: -7}]);
            c5 = b_options(idVal,[{x: 1, y: 0},{x: 2, y: 0},{x: 3, y: 0},{x: 4, y: 0},{x: 5, y: 0},{x: 6, y: 0},{x: 7, y: 0}]);
            c6 = b_options(idVal,[{x: 0, y: 1},{x: 0, y: 2},{x: 0, y: 3},{x: 0, y: 4},{x: 0, y: 5},{x: 0, y: 6},{x: 0, y: 7}]);
            c7 = b_options(idVal,[{x: -1, y: 0},{x: -2, y: 0},{x: -3, y: 0},{x: -4, y: 0},{x: -5, y: 0},{x: -6, y: 0},{x: -7, y: 0}]);
            c8 = b_options(idVal,[{x: 0, y: -1},{x: 0, y: -2},{x: 0, y: -3},{x: 0, y: -4},{x: 0, y: -5},{x: 0, y: -6},{x: 0, y: -7}]);
  
            coordinates = c1.concat(c2).concat(c3).concat(c4).concat(c5).concat(c6).concat(c7).concat(c8);
            
            options = coordinates.slice(0);
            highlighted = options.slice(0);
            if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				 let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}
			 }				 
		  }else{
			  togglehighlight(options);
		  }
  
            break;
        
        case 'w_bishop':

          c1 = w_options(idVal,[{x: 1, y: 1},{x: 2, y: 2},{x: 3, y: 3},{x: 4, y: 4},{x: 5, y: 5},{x: 6, y: 6},{x: 7, y: 7}]);
          c2 = w_options(idVal,[{x: 1, y: -1},{x: 2, y: -2},{x: 3, y: -3},{x: 4, y: -4},{x: 5, y: -5},{x: 6, y: -6},{x: 7, y: -7}]);
          c3 = w_options(idVal,[{x: -1, y: 1},{x: -2, y: 2},{x: -3, y: 3},{x: -4, y: 4},{x: -5, y: 5},{x: -6, y: 6},{x: -7, y: 7}]);
          c4 = w_options(idVal,[{x: -1, y: -1},{x: -2, y: -2},{x: -3, y: -3},{x: -4, y: -4},{x: -5, y: -5},{x: -6, y: -6},{x: -7, y: -7}]);

          coordinates = c1.concat(c2).concat(c3).concat(c4);

          options = coordinates.slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);

          break;
        
        case 'b_bishop':

          c1 = b_options(idVal,[{x: 1, y: 1},{x: 2, y: 2},{x: 3, y: 3},{x: 4, y: 4},{x: 5, y: 5},{x: 6, y: 6},{x: 7, y: 7}]);
          c2 = b_options(idVal,[{x: 1, y: -1},{x: 2, y: -2},{x: 3, y: -3},{x: 4, y: -4},{x: 5, y: -5},{x: 6, y: -6},{x: 7, y: -7}]);
          c3 = b_options(idVal,[{x: -1, y: 1},{x: -2, y: 2},{x: -3, y: 3},{x: -4, y: 4},{x: -5, y: 5},{x: -6, y: 6},{x: -7, y: 7}]);
          c4 = b_options(idVal,[{x: -1, y: -1},{x: -2, y: -2},{x: -3, y: -3},{x: -4, y: -4},{x: -5, y: -5},{x: -6, y: -6},{x: -7, y: -7}]);

          coordinates = c1.concat(c2).concat(c3).concat(c4);

          options = coordinates.slice(0);
          highlighted = options.slice(0);
          if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}
			 }				 
		  }else{
			  togglehighlight(options);
		  }
          break;
        case 'w_knight':

          coordinates = [{ x: -1, y: 2 },{ x: 1, y: 2 },{ x: 1, y: -2 },{ x: -1, y: -2 },{ x: 2, y: 1 },{ x: 2, y: -1 },{ x: -2, y: -1 },{ x: -2, y: 1 }].map(function(val){
            return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
          });

          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);

          break;
        case 'b_knight':

          coordinates = [{ x: -1, y: 2 },{ x: 1, y: 2 },{ x: 1, y: -2 },{ x: -1, y: -2 },{ x: 2, y: 1 },{ x: 2, y: -1 },{ x: -2, y: -1 },{ x: -2, y: 1 }].map(function(val){
            return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
          });

          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
           if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				 let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}
			 }				 
		  }else{
			  togglehighlight(options);
		  }

          break;
        case 'w_rook':

          c1 = w_options(idVal,[{x: 1, y: 0},{x: 2, y: 0},{x: 3, y: 0},{x: 4, y: 0},{x: 5, y: 0},{x: 6, y: 0},{x: 7, y: 0}]);
          c2 = w_options(idVal,[{x: 0, y: 1},{x: 0, y: 2},{x: 0, y: 3},{x: 0, y: 4},{x: 0, y: 5},{x: 0, y: 6},{x: 0, y: 7}]);
          c3 = w_options(idVal,[{x: -1, y: 0},{x: -2, y: 0},{x: -3, y: 0},{x: -4, y: 0},{x: -5, y: 0},{x: -6, y: 0},{x: -7, y: 0}]);
          c4 = w_options(idVal,[{x: 0, y: -1},{x: 0, y: -2},{x: 0, y: -3},{x: 0, y: -4},{x: 0, y: -5},{x: 0, y: -6},{x: 0, y: -7}]);

          coordinates = c1.concat(c2).concat(c3).concat(c4);

          options = coordinates.slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);
          
          break;
        case 'b_rook':
        
          c1 = b_options(idVal,[{x: 1, y: 0},{x: 2, y: 0},{x: 3, y: 0},{x: 4, y: 0},{x: 5, y: 0},{x: 6, y: 0},{x: 7, y: 0}]);
          c2 = b_options(idVal,[{x: 0, y: 1},{x: 0, y: 2},{x: 0, y: 3},{x: 0, y: 4},{x: 0, y: 5},{x: 0, y: 6},{x: 0, y: 7}]);
          c3 = b_options(idVal,[{x: -1, y: 0},{x: -2, y: 0},{x: -3, y: 0},{x: -4, y: 0},{x: -5, y: 0},{x: -6, y: 0},{x: -7, y: 0}]);
          c4 = b_options(idVal,[{x: 0, y: -1},{x: 0, y: -2},{x: 0, y: -3},{x: 0, y: -4},{x: 0, y: -5},{x: 0, y: -6},{x: 0, y: -7}]);

          coordinates = c1.concat(c2).concat(c3).concat(c4);

          options = coordinates.slice(0);
          highlighted = options.slice(0);
          if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				 let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}
			 }				 
		  }else{
			  togglehighlight(options);
		  }
          
          break;
        case 'b_pawn':

          if (pieces[selectedpiece].moved == false) {

            coordinates = [{ x: 0, y: 1 },{ x: 0, y: 2 },{ x: 1, y: 1 },{ x: -1, y: 1 }].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.y)) + ',' + (parseInt(idVal.y) + parseInt(val.x));
            });

          }
          else if (pieces[selectedpiece].moved == true) {

            coordinates = [{ x: 0, y: 1 },{ x: 1, y: 1 },{ x: -1, y: 1 }].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.y)) + ',' + (parseInt(idVal.y) + parseInt(val.x));
            });

          }

          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
          if(mode == 'single'){
			 if(highlighted.length == 0){
				 togglehighlight(options);
			 }else{
				 let datahigh = '';
				 if(wtarget_id != ''){
				 options.forEach(function(element, index, array) {
					 if(element.split(',')[1] == wtarget_id.split(',')[1]){
						 datahigh = element;
					 }                   
                 });
			    }
				if(datahigh != ''){
					document.getElementById(datahigh).click();
				}else{
					document.getElementById(highlighted[0]).click();
				}				 
			 }				 
		  }else{
			  togglehighlight(options);
		  }

          break;

        case 'w_pawn':

          if (pieces[selectedpiece].moved == false) {

            coordinates = [{ x: 0, y: -1 },{ x: 0, y: -2 },{ x: 1, y: -1 },{ x: -1, y: -1 }].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.y)) + ',' + (parseInt(idVal.y) + parseInt(val.x));
            });

          }
          else if (pieces[selectedpiece].moved == true) {

            coordinates = [{ x: 0, y: -1 },{ x: 1, y: -1 },{ x: -1, y: -1 }].map(function(val){
              return (parseInt(idVal.x) + parseInt(val.y)) + ',' + (parseInt(idVal.y) + parseInt(val.x));
            });

          }

          options = (optionsAvail(startpoint, coordinates, pieces[selectedpiece].type)).slice(0);
          highlighted = options.slice(0);
          togglehighlight(options);

          break;

      }
    }

function w_options(idVal,coordinates) {
      
      let flag = false;
      
      coordinates = coordinates.map(function(val){
          return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
        }).filter(val => {
          let pos = { x: 0, y: 0 };
          pos.x = parseInt(val.split(',')[0]);
          pos.y = parseInt(val.split(',')[1]);
  
          if (!(pos.x < 1) && !(pos.x > 8) && !(pos.y < 1) && !(pos.y > 8)) {
            return val;
          }
        }).filter(val => { 
          if (flag == false){
            if (document.getElementById(val).getAttribute('chess') == 'null'){
              console.log(val)
              return val;
            } else if ((document.getElementById(val).getAttribute('chess')).slice(0,1) == 'b') {
              flag = true;
              console.log(val)
              return val;
            } else if ((document.getElementById(val).getAttribute('chess')).slice(0,1) == 'w') {
              console.log(val+'-3')
              flag = true;
            }
          }
        });

      return coordinates;
      
    }

function b_options(idVal,coordinates) {
      
      let flag = false;
      
      coordinates = coordinates.map(function(val){ 
          return (parseInt(idVal.x) + parseInt(val.x)) + ',' + (parseInt(idVal.y) + parseInt(val.y));
        }).filter(val => {
          let pos = { x: 0, y: 0 };
          pos.x = parseInt(val.split(',')[0]);
          pos.y = parseInt(val.split(',')[1]);
  
          if (!(pos.x < 1) && !(pos.x > 8) && !(pos.y < 1) && !(pos.y > 8)) { 
            return val;
          }
        }).filter(val => { 
          if (flag == false){
            if (document.getElementById(val).getAttribute('chess') == 'null'){
              return val;
            } else if ((document.getElementById(val).getAttribute('chess')).slice(0,1) == 'w') {
              flag = true;
              return val;
            } else if ((document.getElementById(val).getAttribute('chess')).slice(0,1) == 'b') {
              flag = true;
            }
          }
        });

      return coordinates;
      
    }

function capture(target) {
      let selectedpiecetarget = {
        name: document.getElementById(selectedpiece).getAttribute('chess'),
        id: selectedpiece
      };

      

        document.getElementById(target.id).innerHTML = pieces[selectedpiecetarget.name].txt;
        document.getElementById(target.id).setAttribute('chess',selectedpiecetarget.name);

        document.getElementById(selectedpiecetarget.id).innerHTML = '';
        document.getElementById(selectedpiecetarget.id).setAttribute('chess','null');

        pieces[selectedpiecetarget.name].idVal = target.id;
        pieces[selectedpiecetarget.name].moved = true;
        pieces[target.name].captured = true;
      
    }

function move(target) {

      let selectedpieceNow = document.getElementById(selectedpiece).getAttribute('chess');

      document.getElementById(target.id).innerHTML = pieces[selectedpieceNow].txt;
      document.getElementById(target.id).setAttribute('chess',selectedpieceNow);
	  
      document.getElementById(selectedpiece).innerHTML = '';
      document.getElementById(selectedpiece).setAttribute('chess','null');
      pieces[selectedpieceNow].idVal = target.id;
      pieces[selectedpieceNow].moved = true;

    }

function aimode(aiIdVal){
	if(parseInt(aiIdVal.split(',')[0]) > 8 || parseInt(aiIdVal.split(',')[1]) > 8 || document.getElementById(aiIdVal).innerHTML == '' || document.getElementById(aiIdVal).getAttribute('chess') == 'null' || (document.getElementById(aiIdVal).getAttribute('chess')).slice(0,1) != 'b'){
		if(parseInt(aiIdVal.split(',')[0]) > 8){
			aimode('2,1');
		}else{
			if(parseInt(aiIdVal.split(',')[1]) > 8){
				aimode((parseInt(aiIdVal.split(',')[0])+1)+',1');
			}else{
				aimode(aiIdVal.split(',')[0]+','+(parseInt(aiIdVal.split(',')[1])+1));
			}
		}
				
	}else{		
		clickedPiece(aiIdVal);
	}
}

function enddata(){

      if (data == 'w') {
        data = 'b';
        togglehighlight(highlighted);
        highlighted = [];
		
        

        document.getElementById('data').innerHTML ="Black Turn";
		if(mode == 'single'){
			wtarget_id = target_id;
			let aiId = (9-parseInt(selectedpiece.split(',')[0]))+','+selectedpiece.split(',')[1];
			selectedpiece = '';
			aimode(aiId);
			
		}
        selectedpiece = '';		

      } else if (data == 'b'){
        data = 'w';
		if(mode != 'single'){togglehighlight(highlighted);}
        highlighted = [];
        selectedpiece = '';

        document.getElementById('data').innerHTML = "White Turn";

      }

    }

function togglehighlight(options) {
	
	if(options == null || options.length == 0){
		let highlightid = target_id.split(',');
		if(highlightid != null){
		let selectedpiecetarget = document.getElementById(target_id).getAttribute('chess');		
		if(pieces[selectedpiecetarget].moved == false && pieces[selectedpiecetarget].type.indexOf('pawn') != -1){
			if(pieces[selectedpiecetarget].type.indexOf('w_pawn') != -1 && document.getElementById((parseInt(highlightid[0])-2)+','+highlightid[1]).innerHTML == ''){
			document.getElementById((parseInt(highlightid[0])-2)+','+highlightid[1]).classList.toggle("highlight");
			document.getElementById((parseInt(highlightid[0])-1)+','+highlightid[1]).classList.toggle("highlight");
			highlighted.push((parseInt(highlightid[0])-2)+','+highlightid[1]);
			highlighted.push((parseInt(highlightid[0])-1)+','+highlightid[1]);
		   }else if(pieces[selectedpiecetarget].type.indexOf('b_pawn') != -1 && (document.getElementById((parseInt(highlightid[0])+2)+','+highlightid[1]).innerHTML == '' || document.getElementById((parseInt(highlightid[0])+1)+','+highlightid[1]).innerHTML == '')){			
			if(document.getElementById((parseInt(highlightid[0])+2)+','+highlightid[1]).innerHTML == ''){highlighted.push((parseInt(highlightid[0])+2)+','+highlightid[1]);}
			if(document.getElementById((parseInt(highlightid[0])+1)+','+highlightid[1]).innerHTML == ''){highlighted.push((parseInt(highlightid[0])+1)+','+highlightid[1]);}
			if(mode == 'single'){
			 if(highlighted.length == 0){
				 aimode(aiId.split(',')[0]+','+(parseInt(aiId.split(',')[1])+1));
			 }else{
				 document.getElementById(highlighted[0]).click();
			 }				 
		  }else{
			  document.getElementById((parseInt(highlightid[0])+1)+','+highlightid[1]).classList.toggle("highlight");
			  document.getElementById((parseInt(highlightid[0])+2)+','+highlightid[1]).classList.toggle("highlight");
		  }
		   }
	    }else if(pieces[selectedpiecetarget].type.indexOf('w_') != -1 && document.getElementById((parseInt(highlightid[0])-1)+','+highlightid[1]).innerHTML == ''){
			document.getElementById((parseInt(highlightid[0])-1)+','+highlightid[1]).classList.toggle("highlight");
			highlighted=(parseInt(highlightid[0])-1)+','+highlightid[1];
		}else if(pieces[selectedpiecetarget].type.indexOf('b') != -1 && document.getElementById((parseInt(highlightid[0])+1)+','+highlightid[1]).innerHTML == ''){
			highlighted=(parseInt(highlightid[0])+1)+','+highlightid[1];
			if(mode == 'single'){
			 if(highlighted.length == 0){
				 aimode(aiId.split(',')[0]+','+(parseInt(aiId.split(',')[1])+1));
			 }else{
				 document.getElementById(highlighted).click();
			 }				 
		  }else{
			  document.getElementById((parseInt(highlightid[0])+1)+','+highlightid[1]).classList.toggle("highlight");
		  }
		}
		}
	}else{
	  if(typeof options == 'string'){
		  if(mode == 'single'){
			  if(document.getElementById(options).innerHTML == '' && pieces[selectedpiecetarget].type.indexOf('b') != -1){
				  aimode(aiId.split(',')[0]+','+(parseInt(aiId.split(',')[1])+1));
			  }else{
				 document.getElementById(options).classList.toggle("highlight");
			  }
		  }else{
			  document.getElementById(options).classList.toggle("highlight");
		  }		  
	  }else{
          options.forEach(function(element, index, array) {			  
             document.getElementById(element).classList.toggle("highlight");
          });
	  }
}}

  
function clickedPiece(selectedid) {
    target_id = selectedid;
    var selectedpieces = {
      name: '',
      id: selectedpiece
    };

    if (selectedpiece == ''){
      selectedpieces.name = document.getElementById(selectedid).getAttribute('chess');
    } else {
      selectedpieces.name = document.getElementById(selectedpiece).getAttribute('chess');
    }

    var target = {
      name: document.getElementById(selectedid).getAttribute('chess'),
      id: selectedid
    };

    if (selectedpiece == '' && target.name.slice(0,1) == data) {

      selectedpiece = selectedid;
      moveoptions(document.getElementById(selectedid).getAttribute('chess'));

    } else if (selectedpiece !='' && target.name == 'null') {

      if (selectedpieces.name == 'w_king' || selectedpieces.name == 'b_king'){
        
        let t0 = (selectedpieces.name = 'w_king');
        let t1 = (selectedpieces.name = 'b_king');
        let t2 = (pieces[selectedpieces.name].moved == false);
        let t3 = (pieces['b_rook2'].moved == false);
        let t4 = (pieces['w_rook2'].moved == false);
        let t5 = (target.id == '1,7');
        let t6 = (target.id == '8,7');
  
        if (t0 && t2 && t4 &&t6){
  
          let k_idVal = '8,5';
          let k_target = '8,7';
          let r_idVal = '8,8';
          let r_target = '8,6';
  
          pieces['w_king'].idVal = '8,7';
          pieces['w_king'].moved = true;
          document.getElementById(k_idVal).innerHTML = '';
          document.getElementById(k_idVal).setAttribute('chess','null');
          document.getElementById(k_target).innerHTML =pieces['w_king'].txt;
          document.getElementById(k_target).setAttribute('chess','w_king');
  
          pieces['w_rook2'].idVal = '8,6';
          pieces['w_rook2'].moved = true;
          document.getElementById(r_idVal).innerHTML = '';
          document.getElementById(r_idVal).setAttribute('chess','null');
          document.getElementById(r_target).innerHTML = pieces['w_rook2'].txt;
          document.getElementById(r_target).setAttribute('chess','w_rook2');
  
          enddata();
  
        } else if (t1 && t2 && t3 && t5){
  
          let k_idVal = '1,5';
          let k_target = '1,7';
          let r_idVal = '1,8';
          let r_target = '1,6';
  
          pieces['b_king'].idVal = '1,7';
          pieces['b_king'].moved = true;
          document.getElementById(k_idVal).innerHTML = '';
          document.getElementById(k_idVal).setAttribute('chess','null');
          document.getElementById(k_target).innerHTML = pieces['b_king'].txt;
          document.getElementById(k_target).setAttribute('chess','b_king');
  
          pieces['b_rook2'].idVal = '1,6';
          pieces['b_rook2'].moved = true;
          document.getElementById(r_idVal).innerHTML = '';
          document.getElementById(r_idVal).setAttribute('chess','null');
          document.getElementById(r_target).innerHTML = pieces['b_rook2'].txt;
          document.getElementById(r_target).setAttribute('chess','b_rook2');
  
          enddata();
          
        } else {
          move(target);
          enddata();
        }
  
      } else {

        move(target);
        enddata();

      }
        
    } else if (selectedpiece !='' && target.name != 'null' && target.id != selectedpieces.id && selectedpieces.name.slice(0,1) != target.name.slice(0,1) && (selectedpieces.name.indexOf('pawn') != -1 && target.id.split(',')[1] != selectedpieces.id.split(',')[1])){ 
      
      if (selectedpieces.id != target.id && highlighted.indexOf(target.id) != (-1)) { 

        capture(target)
        enddata();
        
      }

    } else if (selectedpiece !='' && target.name != 'null' && target.id != selectedpieces.id && selectedpieces.name.slice(0,1) == target.name.slice(0,1)){

      togglehighlight(highlighted);
      highlighted = [];

      selectedpiece = target.id;
      moveoptions(target.name);

    }

  }
